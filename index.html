<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Time Loading Bar</title>
    <link rel="manifest" href="/travel-time-loading-bar/manifest.json">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        #loading-bar-container {
            width: 80%;
            margin: 0 auto;
            border: 1px solid #000;
            border-radius: 5px;
            height: 30px;
            overflow: hidden;
        }
        #loading-bar {
            height: 100%;
            background-color: #4caf50;
            text-align: right;
            padding-right: 10px;
            color: white;
            line-height: 30px;
        }
    </style>
</head>
<body>

<h1>Travel Time Loading Bar</h1>
<div id="loading-bar-container">
    <div id="loading-bar">0%</div>
</div>

<script>
    function updateLoadingBar() {
        // Start time: 08:42
        const startTime = new Date();
        startTime.setHours(8);
        startTime.setMinutes(42);
        startTime.setSeconds(0);
        startTime.setMilliseconds(0);
        
        // End time: 21:15
        const endTime = new Date();
        endTime.setHours(21);
        endTime.setMinutes(15);
        endTime.setSeconds(0);
        endTime.setMilliseconds(0);
        
        // Current time
        const now = new Date();
        
        // Calculate total travel time in minutes
        const totalTravelTime = (endTime - startTime) / 1000 / 60;
        
        // Calculate elapsed time in minutes
        const elapsedTime = (now - startTime) / 1000 / 60;
        
        // Calculate percentage completed
        const percentageCompleted = (elapsedTime / totalTravelTime) * 100;
        
        // Update loading bar
        const loadingBar = document.getElementById('loading-bar');
        loadingBar.style.width = percentageCompleted + '%';
        loadingBar.innerText = Math.min(100, Math.max(0, percentageCompleted.toFixed(2))) + '%';
    }
    
    updateLoadingBar();
    setInterval(updateLoadingBar, 1000); // Update every second
</script>

<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/travel-time-loading-bar/service-worker.js').then(function(registration) {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function(err) {
            console.log('ServiceWorker registration failed: ', err);
        });
    }
</script>

</body>
</html>
