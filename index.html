<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Time Loading Bar</title>
    <link rel="manifest" href="/travel-time-loading-bar/manifest.json">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        #loading-bar-container, #loading-bar-container-2 {
            width: 80%;
            margin: 20px auto;
            border: 1px solid #000;
            border-radius: 5px;
            height: 30px;
            overflow: hidden;
        }
        #loading-bar, #loading-bar-2 {
            height: 100%;
            background-color: #4caf50;
            text-align: right;
            padding-right: 10px;
            color: white;
            line-height: 30px;
        }
    </style>
</head>
<body>

<h1>Travel Time Loading Bar</h1>
<div id="loading-bar-container">
    <div id="loading-bar">0%</div>
</div>
<div id="loading-bar-container-2">
    <div id="loading-bar-2">0%</div>
</div>

<script>
    function updateLoadingBar() {
        // First time range: 08:42 to 21:15
        const startTime1 = new Date();
        startTime1.setHours(8, 42, 0, 0);
        const endTime1 = new Date();
        endTime1.setHours(21, 15, 0, 0);
        
        // Second time range: 21:28 to 22:31
        const startTime2 = new Date();
        startTime2.setHours(21, 28, 0, 0);
        const endTime2 = new Date();
        endTime2.setHours(22, 31, 0, 0);
        
        // Current time
        const now = new Date();
        
        // Calculate total travel time and elapsed time for the first bar
        const totalTravelTime1 = (endTime1 - startTime1) / 1000 / 60;
        const elapsedTime1 = (now - startTime1) / 1000 / 60;
        const percentageCompleted1 = (elapsedTime1 / totalTravelTime1) * 100;
        
        // Update the first loading bar
        const loadingBar1 = document.getElementById('loading-bar');
        loadingBar1.style.width = Math.min(100, Math.max(0, percentageCompleted1)) + '%';
        loadingBar1.innerText = Math.min(100, Math.max(0, percentageCompleted1.toFixed(2))) + '%';
        
        // Calculate total travel time and elapsed time for the second bar
        const totalTravelTime2 = (endTime2 - startTime2) / 1000 / 60;
        const elapsedTime2 = (now - startTime2) / 1000 / 60;
        const percentageCompleted2 = (elapsedTime2 / totalTravelTime2) * 100;
        
        // Update the second loading bar
        const loadingBar2 = document.getElementById('loading-bar-2');
        loadingBar2.style.width = Math.min(100, Math.max(0, percentageCompleted2)) + '%';
        loadingBar2.innerText = Math.min(100, Math.max(0, percentageCompleted2.toFixed(2))) + '%';
    }
    
    updateLoadingBar();
    setInterval(updateLoadingBar, 1000); // Update every second
</script>

<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/travel-time-loading-bar/service-worker.js').then(function(registration) {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function(err) {
            console.log('ServiceWorker registration failed: ', err);
        });
    }
</script>

</body>
</html>
